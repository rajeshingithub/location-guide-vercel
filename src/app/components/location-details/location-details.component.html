<div class="location-details-container" *ngIf="location">

    <!-- HEADER SECTION -->
    <div class="location-header" [style.background-image]="headerImageCss">

        <!-- Gradient Overlay -->
        <div class="header-overlay"></div>

        <!-- Back Button -->
        <button class="btn-back" (click)="goBack()">
            <span>‚Üê</span> Back
        </button>

        <!-- Centered Content -->
        <div class="header-content">
            <h1 class="location-title">{{ location.name }}</h1>
            <p class="location-description">{{ location.description }}</p>

            <button class="btn-view-photos">
                <span>üì∑</span> View Photos
            </button>
        </div>
    </div>

    <!-- 2. MAIN CATEGORIES -->
    <main class="main-content">
        <h2 class="section-title">Explore Categories</h2>
        <p class="section-subtitle">Discover temples, scenery, gardens, facilities, and more</p>

        <div class="categories-grid">
            <ng-container *ngFor="let category of location.categories; let i = index">

                <!-- LARGE CARD -->
                <div *ngIf="isLargeCategory(category.name)" class="place-card large-card"
                    (click)="navigateToCategory(category.id)">

                    <div class="large-card-flex">
                        <div class="large-card-left">
                            <div class="category-icon">{{ category.icon }}</div>
                            <h3 class="category-title">{{ category.name }}</h3>
                        </div>
                        <div class="category-preview-circles">
                            <!-- Using picsum for placeholder circles -->
                            <div *ngFor="let place of category.places.slice(0, 3); let j = index" class="circle-image"
                                [style.background-image]="'url(https://picsum.photos/seed/' + (i + j + 55) + '/100)'"
                                [style.z-index]="j">
                            </div>
                            <!-- Fallback circles so it doesn't look empty -->
                            <div *ngIf="category.places.length === 0" class="circle-image"
                                style="background-image: url('assets/images/banaras.png');"></div>
                            <div *ngIf="category.places.length === 0" class="circle-image"
                                style="background-image: url('assets/images/mathura.png');"></div>
                        </div>
                    </div>
                    <div class="large-card-meta-box">
                        <span class="place-count">{{ category.places.length }} Places</span>
                        <button class="btn-view-purple">View All <span>‚Üí</span></button>
                    </div>


                </div>

                <!-- SMALL CARD -->
                <div *ngIf="!isLargeCategory(category.name)" class="place-card small-card"
                    (click)="navigateToCategory(category.id)">

                    <div class="small-card-left">
                        <div class="category-icon">{{ category.icon }}</div>
                        <div class="small-card-info">
                            <h3 class="category-title">{{ category.name }}</h3>
                            <span class="place-count">{{ category.places.length }} Places</span>
                        </div>
                    </div>
                    <button class="btn-view-blue">View All ‚Üí</button>
                </div>
            </ng-container>
        </div>
    </main>
</div>