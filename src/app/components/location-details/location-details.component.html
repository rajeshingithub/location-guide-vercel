<div class="location-details-container" *ngIf="location">

    <!-- HEADER SECTION -->
    <div class="location-header" [style.background-image]="headerImageCss">
        <div class="header-overlay"></div>
        <button class="btn-back" (click)="goBack()">
            <span>‚Üê</span> Back
        </button>
        <div class="header-content">
            <h2 class="location-title">{{ location.name }}</h2>
            <p class="location-description">{{ location.description }}</p>
            <button class="btn-view-photos" (click)="openGallery()">
                <span>üì∑</span> View Photos
            </button>
        </div>
    </div>

    <!-- STATIC MAP SECTION -->
    <div class="static-map-container fade-in">
        <img [src]="staticMapUrl" alt="City Map" class="map-image">

        <!-- <div *ngFor="let pin of mapPins" class="map-pin" [class.active]="activePinId === pin.id" [style.left.%]="pin.x"
            [style.top.%]="pin.y" (click)="togglePin(pin.id)">

            
            <div class="pin-icon"></div>

            
            <div class="pin-tooltip" *ngIf="activePinId === pin.id">
                <img [src]="pin.image || 'assets/placeholder.jpg'" class="tooltip-img">
                <h4 class="tooltip-title">{{ pin.name }}</h4>
                <span class="tooltip-cat">{{ pin.categoryName }}</span>
                
                
                <button class="btn-open-map" 
                        (click)="openGoogleMaps($event, pin.latitude, pin.longitude)">
                    üìç Open Map
                </button>
            </div>
        </div> -->
    </div>

    <!-- ROUTES SECTION -->

    <div class="routes-section fade-in" *ngIf="location.routes && location.routes.length > 0">
        <div class="container">
            <h3 class="section-label">Popular Routes</h3>

            <div class="routes-list">
                <button *ngFor="let route of location.routes" class="route-card" (click)="openRoute(route.url)">

                    <!-- Left: Icon & Name -->
                    <div class="route-left">
                        <div class="route-icon-box">
                            <span class="route-icon">üó∫Ô∏è</span>
                        </div>
                        <span class="route-name">{{ route.name }}</span>
                    </div>

                    <!-- Right: Duration -->
                    <div class="route-right">
                        <span class="route-duration">{{ route.duration }}</span>
                        <span class="route-arrow">‚Üí</span>
                    </div>

                </button>
            </div>
        </div>
    </div>

    <!-- MAIN CATEGORIES -->
    <main class="main-content">
        <h2 class="section-title">Explore Categories</h2>
        <p class="section-subtitle">Discover temples, scenery, gardens, facilities, and more</p>

        <div class="categories-grid">
            <ng-container *ngFor="let category of location.categories; let i = index">
                <!-- LARGE CARD -->
                <div *ngIf="isLargeCategory(category.name)" class="category-card large-card"
                    (click)="navigateToCategory(category.id)">

                    <div class="large-card-flex">
                        <div class="large-card-left">
                            <div class="category-icon">{{ category.icon }}</div>
                            <h3 class="category-title">{{ category.name }}</h3>
                        </div>
                        <div class="category-preview-circles">
                            <div class="circle-image" style="background-image: url('assets/images/img52.jpg');"></div>
                            <div class="circle-image" style="background-image: url('assets/images/img53.jpg');"></div>
                            <div class="circle-image" style="background-image: url('assets/images/img54.jpg');"></div>
                            <div class="circle-image" style="background-image: url('assets/images/img58.jpg');"></div>
                        </div>
                    </div>
                    <div class="large-card-meta-box">
                        <span class="place-count">{{ category.places.length }} Places</span>
                        <button class="btn-view-purple">View All <span>‚Üí</span></button>
                    </div>
                </div>

                <!-- SMALL CARD -->
                <div *ngIf="!isLargeCategory(category.name)" class="category-card small-card"
                    (click)="navigateToCategory(category.id)">

                    <div class="small-card-left">
                        <div class="category-icon">{{ category.icon }}</div>
                        <div class="small-card-info">
                            <h3 class="category-title">{{ category.name }}</h3>
                            <span class="place-count">{{ category.places.length }} Places</span>
                        </div>
                    </div>
                    <button class="btn-view-blue">View All ‚Üí</button>
                </div>
            </ng-container>
        </div>
    </main>
</div>
<!-- ================================================= -->
<!-- GALLERY MODAL (Must be outside other divs)        -->
<!-- ================================================= -->
<div class="gallery-overlay" *ngIf="isGalleryOpen" (click)="closeGallery()">

    <button class="gallery-close" (click)="closeGallery()">‚úï</button>

    <div class="gallery-content" (click)="$event.stopPropagation()">
        <!-- Prev Button -->
        <button class="nav-btn prev" (click)="prevImage($event)">‚ùÆ</button>

        <!-- Main Image -->
        <div class="image-wrapper">
            <img [src]="galleryImages[currentImageIndex]" class="gallery-img" alt="Gallery Image">
            <div class="gallery-caption">
                {{ currentImageIndex + 1 }} / {{ galleryImages.length }}
            </div>
        </div>

        <!-- Next Button -->
        <button class="nav-btn next" (click)="nextImage($event)">‚ùØ</button>
    </div>
</div>