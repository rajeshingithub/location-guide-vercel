<div class="location-details-container" *ngIf="location">

    <!-- HEADER SECTION -->
    <div class="location-header" [style.background-image]="headerImageCss">
        <div class="header-overlay"></div>
        <button class="btn-back" (click)="goBack()">
            <span>‚Üê</span> Back
        </button>
        <div class="header-content">
            <h2 class="location-title">{{ location.name }}</h2>
            <p class="location-description">{{ location.description }}</p>
            <button class="btn-view-photos">
                <span>üì∑</span> View Photos
            </button>
        </div>
    </div>

    <!-- STATIC MAP SECTION -->
    <div class="static-map-container fade-in">
        <img [src]="staticMapUrl" alt="City Map" class="map-image">

        <!-- <div *ngFor="let pin of mapPins" class="map-pin" [class.active]="activePinId === pin.id" [style.left.%]="pin.x"
            [style.top.%]="pin.y" (click)="togglePin(pin.id)">

            
            <div class="pin-icon"></div>

            
            <div class="pin-tooltip" *ngIf="activePinId === pin.id">
                <img [src]="pin.image || 'assets/placeholder.jpg'" class="tooltip-img">
                <h4 class="tooltip-title">{{ pin.name }}</h4>
                <span class="tooltip-cat">{{ pin.categoryName }}</span>
                
                
                <button class="btn-open-map" 
                        (click)="openGoogleMaps($event, pin.latitude, pin.longitude)">
                    üìç Open Map
                </button>
            </div>
        </div> -->
    </div>

    <!-- MAIN CATEGORIES -->
    <main class="main-content">
        <h2 class="section-title">Explore Categories</h2>
        <p class="section-subtitle">Discover temples, scenery, gardens, facilities, and more</p>

        <div class="categories-grid">
            <ng-container *ngFor="let category of location.categories; let i = index">
                <!-- LARGE CARD -->
                <div *ngIf="isLargeCategory(category.name)" class="category-card large-card"
                    (click)="navigateToCategory(category.id)">

                    <div class="large-card-flex">
                        <div class="large-card-left">
                            <div class="category-icon">{{ category.icon }}</div>
                            <h3 class="category-title">{{ category.name }}</h3>
                        </div>
                        <div class="category-preview-circles">
                            <div *ngFor="let place of category.places.slice(0, 3); let j = index" class="circle-image"
                                [style.background-image]="'url(https://picsum.photos/seed/' + (i + j + 55) + '/100)'"
                                [style.z-index]="j">
                            </div>
                            <div *ngIf="category.places.length === 0" class="circle-image"
                                style="background-image: url('assets/images/banaras.png');"></div>
                            <div *ngIf="category.places.length === 0" class="circle-image"
                                style="background-image: url('assets/images/mathura.png');"></div>
                        </div>
                    </div>
                    <div class="large-card-meta-box">
                        <span class="place-count">{{ category.places.length }} Places</span>
                        <button class="btn-view-purple">View All <span>‚Üí</span></button>
                    </div>
                </div>

                <!-- SMALL CARD -->
                <div *ngIf="!isLargeCategory(category.name)" class="category-card small-card"
                    (click)="navigateToCategory(category.id)">

                    <div class="small-card-left">
                        <div class="category-icon">{{ category.icon }}</div>
                        <div class="small-card-info">
                            <h3 class="category-title">{{ category.name }}</h3>
                            <span class="place-count">{{ category.places.length }} Places</span>
                        </div>
                    </div>
                    <button class="btn-view-blue">View All ‚Üí</button>
                </div>
            </ng-container>
        </div>
    </main>
</div>